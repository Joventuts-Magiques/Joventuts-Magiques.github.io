---
layout: default
---

<main class="games-list-content" role="main" aria-label="{{ page.title }}">
  <header class="page-header">
    <h1 class="page-title">{{ page.title }}</h1>

    <!-- Search and Filter Bar -->
    <div class="games-controls">
      <div class="search-box">
        <input type="text"
               id="game-search"
               class="search-input lang-content"
               placeholder="Cerca jocs..."
               data-lang-key="search-placeholder"
               aria-label="Search games">
        <span class="search-icon" aria-hidden="true">üîç</span>
      </div>

      <div class="filter-controls">
        <select id="difficulty-filter" class="filter-select" aria-label="Filter by difficulty">
          <option value="all" class="lang-content" data-lang-key="all-difficulties">Totes les dificultats</option>
          <option value="facil" class="lang-content" data-lang-key="easy">F√†cil</option>
          <option value="mitja" class="lang-content" data-lang-key="medium">Mitj√†</option>
          <option value="dificil" class="lang-content" data-lang-key="hard">Dif√≠cil</option>
        </select>

        <select id="players-filter" class="filter-select" aria-label="Filter by player count">
          <option value="all" class="lang-content" data-lang-key="all-players">Tots els jugadors</option>
          <option value="2">2 jugadors</option>
          <option value="3-4">3-4 jugadors</option>
          <option value="5+">5+ jugadors</option>
        </select>

        <button id="sort-toggle" class="btn btn-secondary" aria-label="Sort games">
          <span class="lang-content" data-lang-key="sort">Ordenar</span>
          <span class="sort-icon" aria-hidden="true">‚¨áÔ∏è</span>
        </button>
      </div>
    </div>

    <!-- Game Count -->
    <div class="games-count">
      <span id="games-count-text">
        <span class="lang-content" data-lang-key="showing">Mostrant</span>
        <strong id="visible-count">0</strong>
        <span class="lang-content" data-lang-key="of">de</span>
        <strong id="total-count">0</strong>
        <span class="lang-content" data-lang-key="games">jocs</span>
      </span>
    </div>
  </header>

  <!-- Games Grid -->
  <section class="games-section" aria-labelledby="games-grid-title">
    <h2 id="games-grid-title" class="sr-only">{{ page.title }}</h2>

    <div class="games-grid" id="games-grid">
      {% if page.collection == 'games' %}
        {% assign collection = site.games %}
      {% elsif page.collection == 'card_games' %}
        {% assign collection = site.card_games %}
      {% endif %}

      {% assign games_by_title = collection | group_by: 'title' | sort: 'name' %}
      {% for game_group in games_by_title %}
        {% assign ca_game = game_group.items | where: 'lang', 'ca' | first %}
        {% assign es_game = game_group.items | where: 'lang', 'es' | first %}
        {% assign en_game = game_group.items | where: 'lang', 'en' | first %}

        {% if ca_game and es_game and en_game %}
        <article class="game-card"
                 role="article"
                 aria-label="{{ ca_game.title }}"
                 data-title="{{ ca_game.title | downcase }}"
                 data-difficulty="{{ ca_game.difficulty | slugify }}"
                 data-players="{{ ca_game.players }}">

          <!-- Catalan Version -->
          <a href="{{ ca_game.url }}" class="game-card-link lang-ca" aria-label="View {{ ca_game.title }} (Catal√†)">
            {% if ca_game.image %}
            <div class="game-image">
              <img src="{{ ca_game.image }}"
                   alt="{{ ca_game.title }}"
                   width="640"
                   height="360"
                   loading="lazy"
                   decoding="async">
            </div>
            {% endif %}

            <div class="game-card-content">
              <h3 class="game-title">{{ ca_game.title }}</h3>
              <p class="game-excerpt">{{ ca_game.excerpt }}</p>

              <div class="game-meta-preview" role="list" aria-label="Game information">
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üë•</span>
                  <span class="sr-only">Players: </span>
                  {{ ca_game.players }}
                </span>
                {% if ca_game.duration %}
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">‚è±Ô∏è</span>
                  <span class="sr-only">Duration: </span>
                  {{ ca_game.duration }} min
                </span>
                {% endif %}
                {% if ca_game.format %}
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üéØ</span>
                  <span class="sr-only">Format: </span>
                  {{ ca_game.format }}
                </span>
                {% endif %}
                <span class="meta-badge difficulty-{{ ca_game.difficulty | slugify }}" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üìä</span>
                  <span class="sr-only">Difficulty: </span>
                  {{ ca_game.difficulty }}
                </span>
              </div>

              <div class="game-languages" role="list" aria-label="Available languages">
                {% for game in game_group.items %}
                  <span class="lang-indicator" data-lang="{{ game.lang }}"
                        role="listitem"
                        title="{{ site.lang_names[game.lang] | default: game.lang }}"
                        aria-label="Available in {{ site.lang_names[game.lang] | default: game.lang }}">
                    {{ game.lang | upcase }}
                  </span>
                {% endfor %}
              </div>
            </div>
          </a>

          <!-- Spanish Version -->
          <a href="{{ es_game.url }}" class="game-card-link lang-es" style="display:none;" aria-label="Ver {{ es_game.title }} (Espa√±ol)">
            {% if es_game.image %}
            <div class="game-image">
              <img src="{{ es_game.image }}"
                   alt="{{ es_game.title }}"
                   width="640"
                   height="360"
                   loading="lazy"
                   decoding="async">
            </div>
            {% endif %}

            <div class="game-card-content">
              <h3 class="game-title">{{ es_game.title }}</h3>
              <p class="game-excerpt">{{ es_game.excerpt }}</p>

              <div class="game-meta-preview" role="list" aria-label="Game information">
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üë•</span>
                  <span class="sr-only">Players: </span>
                  {{ es_game.players }}
                </span>
                {% if es_game.duration %}
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">‚è±Ô∏è</span>
                  <span class="sr-only">Duration: </span>
                  {{ es_game.duration }} min
                </span>
                {% endif %}
                {% if es_game.format %}
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üéØ</span>
                  <span class="sr-only">Format: </span>
                  {{ es_game.format }}
                </span>
                {% endif %}
                <span class="meta-badge difficulty-{{ es_game.difficulty | slugify }}" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üìä</span>
                  <span class="sr-only">Difficulty: </span>
                  {{ es_game.difficulty }}
                </span>
              </div>

              <div class="game-languages" role="list" aria-label="Available languages">
                {% for game in game_group.items %}
                  <span class="lang-indicator" data-lang="{{ game.lang }}"
                        role="listitem"
                        title="{{ site.lang_names[game.lang] | default: game.lang }}"
                        aria-label="Available in {{ site.lang_names[game.lang] | default: game.lang }}">
                    {{ game.lang | upcase }}
                  </span>
                {% endfor %}
              </div>
            </div>
          </a>

          <!-- English Version -->
          <a href="{{ en_game.url }}" class="game-card-link lang-en" style="display:none;" aria-label="View {{ en_game.title }} (English)">
            {% if en_game.image %}
            <div class="game-image">
              <img src="{{ en_game.image }}"
                   alt="{{ en_game.title }}"
                   width="640"
                   height="360"
                   loading="lazy"
                   decoding="async">
            </div>
            {% endif %}

            <div class="game-card-content">
              <h3 class="game-title">{{ en_game.title }}</h3>
              <p class="game-excerpt">{{ en_game.excerpt }}</p>

              <div class="game-meta-preview" role="list" aria-label="Game information">
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üë•</span>
                  <span class="sr-only">Players: </span>
                  {{ en_game.players }}
                </span>
                {% if en_game.duration %}
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">‚è±Ô∏è</span>
                  <span class="sr-only">Duration: </span>
                  {{ en_game.duration }} min
                </span>
                {% endif %}
                {% if en_game.format %}
                <span class="meta-badge" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üéØ</span>
                  <span class="sr-only">Format: </span>
                  {{ en_game.format }}
                </span>
                {% endif %}
                <span class="meta-badge difficulty-{{ en_game.difficulty | slugify }}" role="listitem">
                  <span class="meta-icon" aria-hidden="true">üìä</span>
                  <span class="sr-only">Difficulty: </span>
                  {{ en_game.difficulty }}
                </span>
              </div>

              <div class="game-languages" role="list" aria-label="Available languages">
                {% for game in game_group.items %}
                  <span class="lang-indicator" data-lang="{{ game.lang }}"
                        role="listitem"
                        title="{{ site.lang_names[game.lang] | default: game.lang }}"
                        aria-label="Available in {{ site.lang_names[game.lang] | default: game.lang }}">
                    {{ game.lang | upcase }}
                  </span>
                {% endfor %}
              </div>
            </div>
          </a>
        </article>
        {% endif %}
      {% endfor %}
    </div>

    <!-- No Results Message -->
    <div id="no-results" class="no-results" style="display: none;">
      <p class="lang-content" data-lang-key="no-results">No s'han trobat jocs amb aquests criteris.</p>
      <button id="clear-filters" class="btn btn-primary lang-content" data-lang-key="clear-filters">Esborrar filtres</button>
    </div>
  </section>
</main>

<!-- Games Filter Script -->
<script src="{{ '/assets/js/games-filter.js' | relative_url }}" defer></script>
