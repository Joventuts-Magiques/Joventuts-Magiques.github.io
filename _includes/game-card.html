{% comment %}
  Game Card Include
  Renders a single game card with all language versions

  Parameters:
  - game_group: Group of games by title (contains ca, es, en versions)
{% endcomment %}

{% assign ca_game = include.game_group.items | where: 'lang', 'ca' | first %}
{% assign es_game = include.game_group.items | where: 'lang', 'es' | first %}
{% assign en_game = include.game_group.items | where: 'lang', 'en' | first %}

{% if ca_game and es_game and en_game %}
<article class="game-card"
         role="article"
         aria-label="{{ ca_game.title }}"
         data-title="{{ ca_game.title | downcase }}"
         data-difficulty="{{ ca_game.difficulty | slugify }}"
         data-players="{{ ca_game.players }}">

  {% comment %} Catalan Version {% endcomment %}
  <a href="{{ ca_game.url }}" class="game-card-link lang-ca" aria-label="View {{ ca_game.title }} (Catal√†)">
    {% if ca_game.image %}
    <div class="game-image">
      <img src="{{ ca_game.image }}"
           alt="{{ ca_game.title }}"
           width="640"
           height="360"
           loading="lazy"
           decoding="async">
    </div>
    {% endif %}

    <div class="game-card-content">
      <h3 class="game-title">{{ ca_game.title }}</h3>
      <p class="game-excerpt">{{ ca_game.excerpt }}</p>

      <div class="game-meta-preview" role="list" aria-label="Game information">
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">üë•</span>
          <span class="sr-only">Players: </span>
          {{ ca_game.players }}
        </span>
        {% if ca_game.duration %}
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">‚è±Ô∏è</span>
          <span class="sr-only">Duration: </span>
          {{ ca_game.duration }} min
        </span>
        {% endif %}
        {% if ca_game.format %}
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">üéØ</span>
          <span class="sr-only">Format: </span>
          {{ ca_game.format }}
        </span>
        {% endif %}
        <span class="meta-badge difficulty-{{ ca_game.difficulty | slugify }}" role="listitem">
          <span class="meta-icon" aria-hidden="true">üìä</span>
          <span class="sr-only">Difficulty: </span>
          {{ ca_game.difficulty }}
        </span>
      </div>

      <div class="game-languages" role="list" aria-label="Available languages">
        {% for game in include.game_group.items %}
          <span class="lang-indicator" data-lang="{{ game.lang }}"
                role="listitem"
                title="{{ site.lang_names[game.lang] | default: game.lang }}"
                aria-label="Available in {{ site.lang_names[game.lang] | default: game.lang }}">
            {{ game.lang | upcase }}
          </span>
        {% endfor %}
      </div>
    </div>
  </a>

  {% comment %} Spanish Version {% endcomment %}
  <a href="{{ es_game.url }}" class="game-card-link lang-es" style="display:none;" aria-label="Ver {{ es_game.title }} (Espa√±ol)">
    {% if es_game.image %}
    <div class="game-image">
      <img src="{{ es_game.image }}"
           alt="{{ es_game.title }}"
           width="640"
           height="360"
           loading="lazy"
           decoding="async">
    </div>
    {% endif %}

    <div class="game-card-content">
      <h3 class="game-title">{{ es_game.title }}</h3>
      <p class="game-excerpt">{{ es_game.excerpt }}</p>

      <div class="game-meta-preview" role="list" aria-label="Game information">
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">üë•</span>
          <span class="sr-only">Players: </span>
          {{ es_game.players }}
        </span>
        {% if es_game.duration %}
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">‚è±Ô∏è</span>
          <span class="sr-only">Duration: </span>
          {{ es_game.duration }} min
        </span>
        {% endif %}
        {% if es_game.format %}
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">üéØ</span>
          <span class="sr-only">Format: </span>
          {{ es_game.format }}
        </span>
        {% endif %}
        <span class="meta-badge difficulty-{{ es_game.difficulty | slugify }}" role="listitem">
          <span class="meta-icon" aria-hidden="true">üìä</span>
          <span class="sr-only">Difficulty: </span>
          {{ es_game.difficulty }}
        </span>
      </div>

      <div class="game-languages" role="list" aria-label="Available languages">
        {% for game in include.game_group.items %}
          <span class="lang-indicator" data-lang="{{ game.lang }}"
                role="listitem"
                title="{{ site.lang_names[game.lang] | default: game.lang }}"
                aria-label="Available in {{ site.lang_names[game.lang] | default: game.lang }}">
            {{ game.lang | upcase }}
          </span>
        {% endfor %}
      </div>
    </div>
  </a>

  {% comment %} English Version {% endcomment %}
  <a href="{{ en_game.url }}" class="game-card-link lang-en" style="display:none;" aria-label="View {{ en_game.title }} (English)">
    {% if en_game.image %}
    <div class="game-image">
      <img src="{{ en_game.image }}"
           alt="{{ en_game.title }}"
           width="640"
           height="360"
           loading="lazy"
           decoding="async">
    </div>
    {% endif %}

    <div class="game-card-content">
      <h3 class="game-title">{{ en_game.title }}</h3>
      <p class="game-excerpt">{{ en_game.excerpt }}</p>

      <div class="game-meta-preview" role="list" aria-label="Game information">
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">üë•</span>
          <span class="sr-only">Players: </span>
          {{ en_game.players }}
        </span>
        {% if en_game.duration %}
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">‚è±Ô∏è</span>
          <span class="sr-only">Duration: </span>
          {{ en_game.duration }} min
        </span>
        {% endif %}
        {% if en_game.format %}
        <span class="meta-badge" role="listitem">
          <span class="meta-icon" aria-hidden="true">üéØ</span>
          <span class="sr-only">Format: </span>
          {{ en_game.format }}
        </span>
        {% endif %}
        <span class="meta-badge difficulty-{{ en_game.difficulty | slugify }}" role="listitem">
          <span class="meta-icon" aria-hidden="true">üìä</span>
          <span class="sr-only">Difficulty: </span>
          {{ en_game.difficulty }}
        </span>
      </div>

      <div class="game-languages" role="list" aria-label="Available languages">
        {% for game in include.game_group.items %}
          <span class="lang-indicator" data-lang="{{ game.lang }}"
                role="listitem"
                title="{{ site.lang_names[game.lang] | default: game.lang }}"
                aria-label="Available in {{ site.lang_names[game.lang] | default: game.lang }}">
            {{ game.lang | upcase }}
          </span>
        {% endfor %}
      </div>
    </div>
  </a>
</article>
{% endif %}
